<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notification</title>
  </head>
  <body>
    <h3>This is a notification demo</h3>

    <script>
      if ("Notification" in window) {
        // Corrected here
        if (Notification.permission === "granted") {
          notify();
        } else {
          Notification.requestPermission().then((res) => {
            // Requests permission
            if (res === "granted") {
              notify();
            } else {
              console.error("Did not receive permission for notifications");
            }
          });
        }
      } else {
        console.error("Notification not supported");
      }

      function notify() {
        const notification = new Notification("Breaking:", {
          body: `Celebrity Caught in Fresh Scandal`,
          icon: "https://unsplash.it/400/400",
          vibration: [300, 200, 300],
        });

        notification.addEventListener("click", function () {
          window.open("https://www.localhost:4200");
        });

        setTimeout(() => notification.close(), 5 * 1000);
      }
    </script>
  </body>
</html>
